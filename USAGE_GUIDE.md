# üöÄ Workflow Engine API - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

## üéØ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã
```bash
# –£–±–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
chmod +x ultimate_start.sh
./ultimate_start.sh

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é
npm run dev
```

### 2. –û—Ç–∫—Ä—ã—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: **http://localhost:3000**

## üåê –í–µ–± –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- **üìä Dashboard** - –≥–ª–∞–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **‚ûï –°–æ–∑–¥–∞–Ω–∏–µ Workflows** - –≤–∏–∑—É–∞–ª—å–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
- **üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ workflows
- **üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞

### –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:
1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å** - —Ç–µ—Å—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
2. **–ü–æ–∫–∞–∑–∞—Ç—å workflows** - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö workflows  
3. **–°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–º–µ—Ä** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ workflow
4. **–°–æ–∑–¥–∞—Ç—å —Å–≤–æ–π** - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
5. **–ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π** - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

## üì° API Reference

### Health Check
```bash
GET /health
# –û—Ç–≤–µ—Ç: —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã, uptime, –≤–µ—Ä—Å–∏—è
```

### Workflows
```bash
# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ workflows
GET /api/workflows

# –°–æ–∑–¥–∞—Ç—å workflow
POST /api/workflows
Content-Type: application/json
{
  "name": "WB Campaign Collector",
  "description": "–°–±–æ—Ä –∫–∞–º–ø–∞–Ω–∏–π WB",
  "definition": {
    "nodes": [
      {
        "id": "step-1",
        "type": "wb-get-campaigns",
        "name": "–ü–æ–ª—É—á–∏—Ç—å –∫–∞–º–ø–∞–Ω–∏–∏ WB",
        "configuration": {
          "filters": {"status": "active"}
        }
      }
    ],
    "connections": []
  }
}

# –í—ã–ø–æ–ª–Ω–∏—Ç—å workflow
POST /api/workflows/:id/execute
{
  "inputData": {
    "authToken": "–í–ê–®_WB_TOKEN"
  }
}
```

### Executions
```bash
# –ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π
GET /api/executions

# –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
GET /api/executions/:id
```

## üí° –ü—Ä–∏–º–µ—Ä—ã Workflows

### 1. –ü—Ä–æ—Å—Ç–æ–π —Å–±–æ—Ä –∫–∞–º–ø–∞–Ω–∏–π WB
```json
{
  "name": "WB Campaigns Basic",
  "description": "–ë–∞–∑–æ–≤—ã–π —Å–±–æ—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π",
  "definition": {
    "nodes": [
      {
        "id": "campaigns",
        "type": "wb-get-campaigns",
        "name": "–ü–æ–ª—É—á–∏—Ç—å –∫–∞–º–ø–∞–Ω–∏–∏",
        "configuration": {
          "filters": {"status": "active"}
        }
      }
    ]
  }
}
```

### 2. –ü–æ–ª–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
```json
{
  "name": "WB Full Analytics",
  "description": "–ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–∞–º–ø–∞–Ω–∏–π –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏",
  "definition": {
    "nodes": [
      {
        "id": "campaigns",
        "type": "wb-get-campaigns", 
        "name": "–ü–æ–ª—É—á–∏—Ç—å –∫–∞–º–ø–∞–Ω–∏–∏"
      },
      {
        "id": "stats",
        "type": "wb-get-stats",
        "name": "–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É",
        "configuration": {
          "dateFrom": "2025-09-01",
          "dateTo": "2025-09-20"
        }
      },
      {
        "id": "aggregate", 
        "type": "data-aggregator",
        "name": "–ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ"
      }
    ],
    "connections": [
      {"source": "campaigns", "target": "stats"},
      {"source": "stats", "target": "aggregate"}
    ]
  }
}
```

## üîß –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥—É–ª–∏

### wb-get-campaigns
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–∞–º–ø–∞–Ω–∏–π WB
```json
{
  "type": "wb-get-campaigns",
  "configuration": {
    "filters": {
      "status": "active|paused|ended",
      "type": 1
    }
  }
}
```

### wb-get-stats  
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –∫–∞–º–ø–∞–Ω–∏—è–º
```json
{
  "type": "wb-get-stats",
  "configuration": {
    "dateFrom": "2025-09-01",
    "dateTo": "2025-09-20"
  }
}
```

### data-aggregator
–ê–≥—Ä–µ–≥–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
```json
{
  "type": "data-aggregator", 
  "configuration": {
    "aggregationType": "sum|avg|count",
    "groupBy": ["field1", "field2"]
  }
}
```

## ‚ùó Troubleshooting

### –ü–æ—Ä—Ç –∑–∞–Ω—è—Ç
```bash
# –ù–∞–π—Ç–∏ –∏ —É–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
lsof -ti:3000 | xargs kill -9

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–Ω–æ–≤–∞
npm run dev
```

### –û—à–∏–±–∫–∏ –ë–î
```bash
# –°–±—Ä–æ—Å–∏—Ç—å –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ë–î
npx prisma migrate dev
npx prisma generate
```

### –û—à–∏–±–∫–∏ WB API
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–∞ WB
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ç–æ–∫–µ–Ω –Ω–µ –∏—Å—Ç—ë–∫
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã API WB

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- **Dashboard**: http://localhost:3000
- **Health Check**: http://localhost:3000/health  
- **API Docs**: –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

---
*–û–±–Ω–æ–≤–ª–µ–Ω–æ: 20 —Å–µ–Ω—Ç—è–±—Ä—è 2025*
